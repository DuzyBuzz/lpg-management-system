<div class="bg-white rounded-lg p-6 shadow-sm">
  <!-- Header -->
  <div class="flex justify-between mb-4">
    <div>
      <h2 class="text-xl font-bold">
        Branch Sales — {{ currentYear }}
      </h2>
      <p class="text-sm text-slate-500">
        Monthly cash sales comparison per branch
      </p>
    </div>

    <div class="flex gap-2">
      <button (click)="prevYear()" class="px-2 py-1 bg-slate-100 rounded">«</button>
      <span class="px-3 py-1 border rounded">{{ currentYear }}</span>
      <button (click)="nextYear()" class="px-2 py-1 bg-slate-100 rounded">»</button>
    </div>
  </div>

<!-- Charts Grid -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">

  <!-- Bar Chart (existing) -->
  <div class="lg:col-span-2 h-96">
    <canvas
      baseChart
      [type]="chartType"
      [data]="chartData"
      [options]="chartOptions">
    </canvas>
  </div>

  <!-- Pie Chart -->
  <div class="h-96 bg-white rounded-lg border p-4 flex flex-col">
    <h3 class="text-sm font-semibold text-slate-700 mb-2">
      Yearly Sales Distribution
    </h3>

    <canvas
      baseChart
      [type]="'pie'"
      [data]="pieChartData"
      [options]="pieChartOptions">
    </canvas>
  </div>

</div>


  <!-- Table -->
  <div class="overflow-x-auto">
    <div class="flex justify-between mb-2">
      <h3 class="font-semibold">Monthly Branch Sales</h3>
      <div class="flex gap-2">
        <button (click)="exportToExcel()" class="bg-green-600 text-white px-3 py-1 rounded">
          Export
        </button>
        <button (click)="printTable()" class="bg-blue-600 text-white px-3 py-1 rounded">
          Print
        </button>
      </div>
    </div>

    <table id="branch-sales-table" class="min-w-full border">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-3 py-2 text-left">Month</th>
          <th *ngFor="let b of branches" class="px-3 py-2 text-right">{{ b }}</th>
          <th class="px-3 py-2 text-right">Total</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let r of tableRows">
          <td class="px-3 py-2">{{ r.month }}</td>
          <td *ngFor="let b of branches" class="px-3 py-2 text-right">
            {{ formatCurrency(r.branches[b]) }}
          </td>
          <td class="px-3 py-2 text-right font-bold">
            {{ formatCurrency(r.monthlyTotal) }}
          </td>
        </tr>
      </tbody>

      <tfoot class="bg-slate-100 font-bold">
        <tr>
          <td class="px-3 py-2 text-right">TOTAL</td>
          <td *ngFor="let b of branches" class="px-3 py-2 text-right">
            {{ formatCurrency(yearlyBranchTotals[b]) }}
          </td>
          <td class="px-3 py-2 text-right">
            {{ formatCurrency(yearlyGrandTotal) }}
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
